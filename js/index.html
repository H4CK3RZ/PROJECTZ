<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script>
			$(document).ready(function() {
				function rpcData(id, functionCall) {
					$.getJSON( "dataRPCc.html?id=" + id, function( data ) {
					}).done(function() {
						functionCall();
					}).always(function() {
						console.log("this is always done, success or not");
					}).fail(function() {
						alert('something went wrong');
					});
				}
				$('.detect').click(function() {
					// UPDATE users SET authorised = authorised XOR 1 WHERE id = 2;
					$theElement = $(this).parent();
					doThis = function() {
						$theElement.remove();
					}
					var id = $(this).parent().children('.itemid').text();
					rpcData(id, doThis);
				});
			});
		</script>
	</head>
	<body>
		<div id="container">Ext Js Scroll top test</div>
		<div>
			<span class="itemid">12</span>
			<span>Content title</span>
			<span class="detect">link</span>
		</div>
	</body>
</html>
